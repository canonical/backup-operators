[32mINFO    [0m jubilant:_juju.py:313 cli: juju status --model test-charm-b31e5322 --format json
[32mINFO    [0m jubilant:_juju.py:313 cli: juju ssh --model test-charm-b31e5322 ubuntu/0 'sudo -u postgres psql -P pager=off -d ubuntu -c '"'"'SELECT * FROM release;'"'"''
[32mINFO    [0m integration.test_charm:test_charm.py:104 run backup job: relation-test-charm-b31e5322-bacula-fd-0-73bc57f7a625-backup
[32mINFO    [0m integration.test_charm:test_charm.py:106 run backup job output: run job="relation-test-charm-b31e5322-bacula-fd-0-73bc57f7a625-backup" level="Full" fileset="relation-test-charm-b31e5322-bacula-fd-0-73bc57f7a625-fileset" client="relation-test-charm-b31e5322-bacula-fd-0-73bc57f7a625-fd" storage="charm-s3-storage" pool="charm-cloud-pool" priority="10" accurate="no" yes
Using Catalog "charm-catalog"
Job queued. JobId=1

[32mINFO    [0m integration.test_charm:test_charm.py:33 relation-test-charm-b31e5322-bacula-fd-0-73bc57f7a625-backup job run status: {'jobid': 1, 'job': 'relation-test-charm-b31e5322-bacula-fd-0-73bc57f7a625-backup.2025-11-20_19.31.56_14', 'name': 'relation-test-charm-b31e5322-bacula-fd-0-73bc57f7a625-backup', 'type': 'B', 'level': 'F', 'clientid': 2, 'jobstatus': 'C', 'schedtime': '2025-11-20 19:31:56', 'starttime': '2025-11-20 19:31:56', 'endtime': None, 'realendtime': None, 'realstarttime': None, 'jobtdate': 1763667116, 'volsessionid': 0, 'volsessiontime': 0, 'jobfiles': 0, 'jobbytes': 0, 'readbytes': 0, 'joberrors': 0, 'jobmissingfiles': 0, 'poolid': 0, 'filesetid': 0, 'priorjobid': 0, 'priorjob': '', 'purgedfiles': 0, 'hasbase': 0, 'hascache': 0, 'reviewed': 0, 'comment': '', 'filetable': 'File', 'isvirtualfull': 0, 'compressratio': '0', 'rate': '0', 'lastreadstorageid': 0, 'lastreaddevice': '', 'writestorageid': 0, 'writedevice': '', 'statusinfo': '', 'encrypted': 0, 'client': 'relation-test-charm-b31e5322-bacula-fd-0-73bc57f7a625-fd', 'pool': None, 'fileset': None, 'content': None}
[32mINFO    [0m integration.test_charm:test_charm.py:33 relation-test-charm-b31e5322-bacula-fd-0-73bc57f7a625-backup job run status: {'jobid': 1, 'job': 'relation-test-charm-b31e5322-bacula-fd-0-73bc57f7a625-backup.2025-11-20_19.31.56_14', 'name': 'relation-test-charm-b31e5322-bacula-fd-0-73bc57f7a625-backup', 'type': 'B', 'level': 'F', 'clientid': 2, 'jobstatus': 'C', 'schedtime': '2025-11-20 19:31:56', 'starttime': '2025-11-20 19:31:56', 'endtime': None, 'realendtime': None, 'realstarttime': None, 'jobtdate': 1763667116, 'volsessionid': 0, 'volsessiontime': 0, 'jobfiles': 0, 'jobbytes': 0, 'readbytes': 0, 'joberrors': 0, 'jobmissingfiles': 0, 'poolid': 0, 'filesetid': 0, 'priorjobid': 0, 'priorjob': '', 'purgedfiles': 0, 'hasbase': 0, 'hascache': 0, 'reviewed': 0, 'comment': '', 'filetable': 'File', 'isvirtualfull': 0, 'compressratio': '0', 'rate': '0', 'lastreadstorageid': 0, 'lastreaddevice': '', 'writestorageid': 0, 'writedevice': '', 'statusinfo': '', 'encrypted': 0, 'client': 'relation-test-charm-b31e5322-bacula-fd-0-73bc57f7a625-fd', 'pool': None, 'fileset': None, 'content': None}
[32mINFO    [0m integration.test_charm:test_charm.py:33 relation-test-charm-b31e5322-bacula-fd-0-73bc57f7a625-backup job run status: {'jobid': 1, 'job': 'relation-test-charm-b31e5322-bacula-fd-0-73bc57f7a625-backup.2025-11-20_19.31.56_14', 'name': 'relation-test-charm-b31e5322-bacula-fd-0-73bc57f7a625-backup', 'type': 'B', 'level': 'F', 'clientid': 2, 'jobstatus': 'T', 'schedtime': '2025-11-20 19:31:56', 'starttime': '2025-11-20 19:31:58', 'endtime': '2025-11-20 19:31:58', 'realendtime': '2025-11-20 19:31:58', 'realstarttime': '2025-11-20 19:31:58', 'jobtdate': 1763667118, 'volsessionid': 1, 'volsessiontime': 1763667094, 'jobfiles': 3, 'jobbytes': 1994, 'readbytes': 1994, 'joberrors': 0, 'jobmissingfiles': 0, 'poolid': 1, 'filesetid': 2, 'priorjobid': 0, 'priorjob': '', 'purgedfiles': 0, 'hasbase': 0, 'hascache': 0, 'reviewed': 0, 'comment': '', 'filetable': 'File', 'isvirtualfull': 0, 'compressratio': '0', 'rate': '2', 'lastreadstorageid': 0, 'lastreaddevice': '', 'writestorageid': 1, 'writedevice': 'charm-s3-storage', 'statusinfo': '', 'encrypted': 0, 'client': 'relation-test-charm-b31e5322-bacula-fd-0-73bc57f7a625-fd', 'pool': 'charm-cloud-pool', 'fileset': 'relation-test-charm-b31e5322-bacula-fd-0-73bc57f7a625-fileset', 'content': 'files'}
[32mINFO    [0m integration.test_charm:test_charm.py:109 s3 objects: ['bacula-server-vol-20251120-relation-test-charm-b31e5322-bacula-fd-0-73bc57f7a625-backup-0/part.1', 'bacula-server-vol-20251120-relation-test-charm-b31e5322-bacula-fd-0-73bc57f7a625-backup-0/part.2']
[32mINFO    [0m jubilant:_juju.py:313 cli: juju ssh --model test-charm-b31e5322 ubuntu/0 'sudo -u postgres psql -d ubuntu -c '"'"'TRUNCATE release;'"'"''
[32mINFO    [0m integration.test_charm:test_charm.py:113 truncate database table 'release': TRUNCATE TABLE

[32mINFO    [0m jubilant:_juju.py:313 cli: juju ssh --model test-charm-b31e5322 ubuntu/0 'sudo -u postgres psql -P pager=off -d ubuntu -c '"'"'SELECT * FROM release;'"'"''
[32mINFO    [0m integration.test_charm:test_charm.py:118 run restore job output: restore client="relation-test-charm-b31e5322-bacula-fd-0-73bc57f7a625-fd" jobid="1" fileset="relation-test-charm-b31e5322-bacula-fd-0-73bc57f7a625-fileset" select all done replace="always" restorejob="relation-test-charm-b31e5322-bacula-fd-0-73bc57f7a625-restore" where="/" yes
Using Catalog "charm-catalog"
+-------+-------+----------+----------+---------------------+-------------------------------------------------------------------------------------------+
| jobid | level | jobfiles | jobbytes | starttime           | volumename                                                                                |
+-------+-------+----------+----------+---------------------+-------------------------------------------------------------------------------------------+
| 1     | F     | 3        | 1994     | 2025-11-20 19:31:58 | bacula-server-vol-20251120-relation-test-charm-b31e5322-bacula-fd-0-73bc57f7a625-backup-0 |
+-------+-------+----------+----------+---------------------+-------------------------------------------------------------------------------------------+
You have selected the following JobId: 1

Building directory tree for JobId(s) 1 ...
1 files inserted into the tree and marked for extraction.
Bootstrap records written to /opt/bacula/working/charm-bacula-dir.restore.1.bsr

The Job will require the following (*=>InChanger):
   Volume(s)                 Storage(s)                SD Device(s)
===========================================================================

    bacula-server-vol-20251120-relation-test-charm-b31e5322-bacula-fd-0-73bc57f7a625-backup-0 charm-s3-storage          charm-s3-storage

Volumes marked with "*" are in the Autochanger.


3 files selected to be restored.

Using Catalog "charm-catalog"
Job queued. JobId=2

[32mINFO    [0m integration.test_charm:test_charm.py:33 relation-test-charm-b31e5322-bacula-fd-0-73bc57f7a625-restore job run status: {'jobid': 2, 'job': 'relation-test-charm-b31e5322-bacula-fd-0-73bc57f7a625-restore.2025-11-20_19.32.00_31', 'name': 'relation-test-charm-b31e5322-bacula-fd-0-73bc57f7a625-restore', 'type': 'R', 'level': ' ', 'clientid': 2, 'jobstatus': 'C', 'schedtime': '2025-11-20 19:32:00', 'starttime': '2025-11-20 19:32:00', 'endtime': None, 'realendtime': None, 'realstarttime': None, 'jobtdate': 1763667120, 'volsessionid': 0, 'volsessiontime': 0, 'jobfiles': 0, 'jobbytes': 0, 'readbytes': 0, 'joberrors': 0, 'jobmissingfiles': 0, 'poolid': 0, 'filesetid': 0, 'priorjobid': 0, 'priorjob': '', 'purgedfiles': 0, 'hasbase': 0, 'hascache': 0, 'reviewed': 0, 'comment': '', 'filetable': 'File', 'isvirtualfull': 0, 'compressratio': '0', 'rate': '0', 'lastreadstorageid': 0, 'lastreaddevice': '', 'writestorageid': 0, 'writedevice': '', 'statusinfo': '', 'encrypted': 0, 'client': 'relation-test-charm-b31e5322-bacula-fd-0-73bc57f7a625-fd', 'pool': None, 'fileset': None, 'content': None}
[32mINFO    [0m integration.test_charm:test_charm.py:33 relation-test-charm-b31e5322-bacula-fd-0-73bc57f7a625-restore job run status: {'jobid': 2, 'job': 'relation-test-charm-b31e5322-bacula-fd-0-73bc57f7a625-restore.2025-11-20_19.32.00_31', 'name': 'relation-test-charm-b31e5322-bacula-fd-0-73bc57f7a625-restore', 'type': 'R', 'level': 'F', 'clientid': 2, 'jobstatus': 'T', 'schedtime': '2025-11-20 19:32:00', 'starttime': '2025-11-20 19:32:02', 'endtime': '2025-11-20 19:32:02', 'realendtime': '2025-11-20 19:32:02', 'realstarttime': '2025-11-20 19:32:02', 'jobtdate': 1763667122, 'volsessionid': 2, 'volsessiontime': 1763667094, 'jobfiles': 3, 'jobbytes': 1994, 'readbytes': 1994, 'joberrors': 0, 'jobmissingfiles': 0, 'poolid': 0, 'filesetid': 0, 'priorjobid': 0, 'priorjob': '', 'purgedfiles': 0, 'hasbase': 0, 'hascache': 0, 'reviewed': 0, 'comment': '', 'filetable': 'File', 'isvirtualfull': 0, 'compressratio': '0', 'rate': '2', 'lastreadstorageid': 1, 'lastreaddevice': 'charm-s3-storage', 'writestorageid': 0, 'writedevice': '', 'statusinfo': '', 'encrypted': 0, 'client': 'relation-test-charm-b31e5322-bacula-fd-0-73bc57f7a625-fd', 'pool': None, 'fileset': None, 'content': None}
[32mINFO    [0m jubilant:_juju.py:313 cli: juju ssh --model test-charm-b31e5322 ubuntu/0 'sudo -u postgres psql -P pager=off -d ubuntu -c '"'"'SELECT * FROM release;'"'"''
[32mINFO    [0m jubilant:_juju.py:313 cli: juju debug-log --model test-charm-b31e5322 --replay
[32mINFO    [0m root:main.py:154 dropping jdl for model test-charm-b31e5322 to .logs/test-charm-b31e5322-jdl.txt